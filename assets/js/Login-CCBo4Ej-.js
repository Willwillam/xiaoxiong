import{d as e,r as a,a as s,c as r,b as o,w as l,u as n,e as t,o as u,f as d,g as i,E as m,_ as c}from"./main-B2Pasqmg.js";const p=[{username:"xsq",password:"5201314",token:"admin-token",userInfo:{id:1,username:"xsq",avatar:"https://avatars.githubusercontent.com/u/1?v=4",roles:["admin"]}}],f={class:"login-container"},g=c(e({__name:"Login",setup(e){const c=n(),g=a(!1),w=a(),v=s({username:"",password:""}),_={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},k=async()=>{w.value&&await w.value.validate((async e=>{if(e){g.value=!0;try{const{token:e,userInfo:r}=await(a=v.username,s=v.password,new Promise(((e,r)=>{setTimeout((()=>{const o=p.find((e=>e.username===a&&e.password===s));o?e({token:o.token,userInfo:o.userInfo}):r(new Error("用户名或密码错误"))}),300)})));localStorage.setItem("token",e),localStorage.setItem("userInfo",JSON.stringify(r)),m.success("登录成功"),c.push("/")}catch(r){m.error(r.message)}finally{g.value=!1}}var a,s}))};return(e,a)=>{const s=t("el-input"),n=t("el-form-item"),m=t("el-button"),c=t("el-form"),p=t("el-card");return u(),r("div",f,[o(p,{class:"login-card"},{header:l((()=>a[2]||(a[2]=[d("h3",null,"系统登录",-1)]))),default:l((()=>[o(c,{model:v,rules:_,ref_key:"loginFormRef",ref:w},{default:l((()=>[o(n,{prop:"username"},{default:l((()=>[o(s,{modelValue:v.username,"onUpdate:modelValue":a[0]||(a[0]=e=>v.username=e),placeholder:"用户名","prefix-icon":"User"},null,8,["modelValue"])])),_:1}),o(n,{prop:"password"},{default:l((()=>[o(s,{modelValue:v.password,"onUpdate:modelValue":a[1]||(a[1]=e=>v.password=e),type:"password",placeholder:"密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])])),_:1}),o(n,null,{default:l((()=>[o(m,{type:"primary",onClick:k,loading:g.value,block:""},{default:l((()=>a[3]||(a[3]=[i(" 登录 ")]))),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])])),_:1})])}}}),[["__scopeId","data-v-390c902a"]]);export{g as default};
