{"version":3,"file":"Login-Cvxm2dkY.js","sources":["../../../src/mock/user.ts","../../../src/views/Login.vue"],"sourcesContent":["interface UserInfo {\n  id: number\n  username: string\n  avatar?: string\n  roles: string[]\n}\n\nexport const users = [\n  {\n    username: 'xsq',\n    password: '5201314',\n    token: 'admin-token',\n    userInfo: {\n      id: 1,\n      username: 'xsq',\n      avatar: 'https://avatars.githubusercontent.com/u/1?v=4',\n      roles: ['admin']\n    }\n  }\n]\n\n// 模拟登录API\nexport const login = (username: string, password: string) => {\n  return new Promise<{token: string, userInfo: UserInfo}>((resolve, reject) => {\n    setTimeout(() => {\n      const user = users.find(\n        (user) => user.username === username && user.password === password\n      )\n      if (user) {\n        resolve({\n          token: user.token,\n          userInfo: user.userInfo\n        })\n      } else {\n        reject(new Error('用户名或密码错误'))\n      }\n    }, 300) // 模拟网络延迟\n  })\n} ","<template>\n  <div class=\"login-container\">\n    <el-card class=\"login-card\">\n      <template #header>\n        <h3>系统登录</h3>\n      </template>\n      <el-form :model=\"loginForm\" :rules=\"rules\" ref=\"loginFormRef\">\n        <el-form-item prop=\"username\">\n          <el-input \n            v-model=\"loginForm.username\"\n            placeholder=\"用户名\"\n            prefix-icon=\"User\"\n          />\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input \n            v-model=\"loginForm.password\"\n            type=\"password\"\n            placeholder=\"密码\"\n            prefix-icon=\"Lock\"\n            show-password\n          />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"handleLogin\" :loading=\"loading\" block>\n            登录\n          </el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive } from 'vue'\nimport { useRouter } from 'vue-router'\nimport type { FormInstance } from 'element-plus'\nimport { ElMessage } from 'element-plus'\nimport { login } from '../mock/user'\n\nconst router = useRouter()\nconst loading = ref(false)\nconst loginFormRef = ref<FormInstance>()\n\nconst loginForm = reactive({\n  username: '',\n  password: ''\n})\n\nconst rules = {\n  username: [{ required: true, message: '请输入用户名', trigger: 'blur' }],\n  password: [{ required: true, message: '请输入密码', trigger: 'blur' }]\n}\n\nconst handleLogin = async () => {\n  if (!loginFormRef.value) return\n  \n  await loginFormRef.value.validate(async (valid) => {\n    if (valid) {\n      loading.value = true\n      try {\n        const { token, userInfo } = await login(loginForm.username, loginForm.password)\n        localStorage.setItem('token', token)\n        localStorage.setItem('userInfo', JSON.stringify(userInfo))\n        ElMessage.success('登录成功')\n        router.push('/')\n      } catch (error) {\n        ElMessage.error((error as Error).message)\n      } finally {\n        loading.value = false\n      }\n    }\n  })\n}\n</script>\n\n<style lang=\"less\" scoped>\n.login-container {\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #f5f5f5;\n\n  .login-card {\n    width: 400px;\n\n    :deep(.el-card__header) {\n      h3 {\n        margin: 0;\n        text-align: center;\n        font-size: 20px;\n      }\n    }\n  }\n}\n</style> "],"names":["users","login","username","password","resolve","reject","user","router","useRouter","loading","ref","loginFormRef","loginForm","reactive","rules","handleLogin","valid","token","userInfo","ElMessage","error"],"mappings":"2HAOO,MAAMA,EAAQ,CACnB,CACE,SAAU,MACV,SAAU,UACV,MAAO,cACP,SAAU,CACR,GAAI,EACJ,SAAU,MACV,OAAQ,gDACR,MAAO,CAAC,OAAO,CAAA,CACjB,CAEJ,EAGaC,EAAQ,CAACC,EAAkBC,IAC/B,IAAI,QAA6C,CAACC,EAASC,IAAW,CAC3E,WAAW,IAAM,CACf,MAAMC,EAAON,EAAM,KAChBM,GAASA,EAAK,WAAaJ,GAAYI,EAAK,WAAaH,CAC5D,EACIG,EACMF,EAAA,CACN,MAAOE,EAAK,MACZ,SAAUA,EAAK,QAAA,CAChB,EAEMD,EAAA,IAAI,MAAM,UAAU,CAAC,GAE7B,GAAG,CAAA,CACP,2DCGH,MAAME,EAASC,EAAU,EACnBC,EAAUC,EAAI,EAAK,EACnBC,EAAeD,EAAkB,EAEjCE,EAAYC,EAAS,CACzB,SAAU,GACV,SAAU,EAAA,CACX,EAEKC,EAAQ,CACZ,SAAU,CAAC,CAAE,SAAU,GAAM,QAAS,SAAU,QAAS,OAAQ,EACjE,SAAU,CAAC,CAAE,SAAU,GAAM,QAAS,QAAS,QAAS,MAAQ,CAAA,CAClE,EAEMC,EAAc,SAAY,CACzBJ,EAAa,OAElB,MAAMA,EAAa,MAAM,SAAS,MAAOK,GAAU,CACjD,GAAIA,EAAO,CACTP,EAAQ,MAAQ,GACZ,GAAA,CACI,KAAA,CAAE,MAAAQ,EAAO,SAAAC,GAAa,MAAMjB,EAAMW,EAAU,SAAUA,EAAU,QAAQ,EACjE,aAAA,QAAQ,QAASK,CAAK,EACnC,aAAa,QAAQ,WAAY,KAAK,UAAUC,CAAQ,CAAC,EACzDC,EAAU,QAAQ,MAAM,EACxBZ,EAAO,KAAK,GAAG,QACRa,EAAO,CACJD,EAAA,MAAOC,EAAgB,OAAO,CAAA,QACxC,CACAX,EAAQ,MAAQ,EAAA,CAClB,CACF,CACD,CACH"}